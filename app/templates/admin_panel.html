{% extends "base.html" %}
{% block title %}Panel Administrativo{% endblock %}

{% block content %}
<div class="container py-4">

  {% set hora = now().hour %}
  {% if hora >= 6 and hora < 19 %}
    <h4 class="mb-4">Buenos días, {{ current_user_name }}!</h4>
  {% else %}
    <h4 class="mb-4">Buenas noches, {{ current_user_name }}!</h4>
  {% endif %}

  <!-- ============================== -->
  <!-- OPERACIÓN -->
  <!-- ============================== -->
  <div class="admin-section mb-5">
    <h5 class="admin-section-title mb-4">Operación</h5>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">

      <!-- Llenado de Formatos -->
      <div class="col">
        <div class="admin-card h-100">
          <div class="admin-body">
            <h5 class="admin-title">Llenado de Formatos por Producto</h5>
            <p class="admin-desc">Gestión de llenado automatico de formatos.</p>
          </div>
          <div class="admin-footer">
            <a class="btn btn-redondo"
               href="{{ url_for('core.inicio_productos') }}">
              Abrir
            </a>
          </div>
        </div>
      </div>
            <!-- Minutas -->
      <div class="col">
        <div class="admin-card h-100">
          <div class="admin-body">
            <h5 class="admin-title">Minutas</h5>
            <p class="admin-desc">Gestión de minutas administrativas.</p>
          </div>
          <div class="admin-footer">
            <a class="btn btn-redondo"
               href="{{ url_for('minutas.lista') }}">
              Abrir
            </a>
          </div>
        </div>
      </div>

      <!-- Generador de Referencias -->
      <div class="col">
        <div class="admin-card h-100">
          <div class="admin-body">
            <h5 class="admin-title">Referencias</h5>
            <p class="admin-desc">Gestión de Referncias bancarias</p>
          </div>
          <div class="admin-footer">
            <a class="btn btn-redondo"
               href="">
              Abrir
            </a>
          </div>
        </div>
      </div>

    </div>
  </div>

  {% if session.get('role') == 'admin' %}
  <!-- ============================== -->
  <!-- DATOS MAESTROS -->
  <!-- ============================== -->
  <div class="admin-section mb-5">
    <h5 class="admin-section-title mb-4">Datos Maestros</h5>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">

      <!-- Catálogos -->
      <div class="col">
        <div class="admin-card h-100">
          <div class="admin-body">
            <h5 class="admin-title">Catálogos</h5>
            <p class="admin-desc">CPAE, ETV, Entidades, Municipios.</p>
          </div>
          <div class="admin-footer">
            <a class="btn btn-redondo"
            href="{{ url_for('catalog_admin.index') }}">
              Abrir
            </a>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- ============================== -->
  <!-- CONFIGURACIÓN Y SEGURIDAD -->
  <!-- ============================== -->
  <div class="admin-section">
    <h5 class="admin-section-title mb-4">Configuración y Seguridad</h5>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">

            <!-- Usuarios -->
            <div class="col">
              <div class="admin-card h-100">
                <div class="admin-body">
                  <h5 class="admin-title">Usuarios</h5>
                  <p class="admin-desc">Gestión de usuarios del sistema.</p>
                </div>
                <div class="admin-footer">
                  <a class="btn btn-redondo"
                     href="{{ url_for('users_admin.listar_usuarios') }}">
                    Abrir
                  </a>
                </div>
              </div>
            </div>

      <!-- Parámetros del sistema -->
      <div class="col">
        <div class="admin-card h-100">
          <div class="admin-body">
            <h5 class="admin-title">Parámetros del sistema</h5>
            <p class="admin-desc">Configuración general y timeout.</p>
          </div>
          <div class="admin-footer">
            <a class="btn btn-redondo"
               href="{{ url_for('params_admin.editar_timeout') }}">
              Abrir
            </a>
          </div>
        </div>
      </div>

      <!-- Permisos por Rol -->
      <div class="col">
        <div class="admin-card h-100">
          <div class="admin-body">
            <h5 class="admin-title">Permisos de Accesos por Rol</h5>
            <p class="admin-desc">Asignación de permisos de accesos por Rol.</p>
          </div>
          <div class="admin-footer">
            <a class="btn btn-redondo"
               href="{{ url_for('users_admin.roles_permisos') }}">
              Abrir
            </a>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="admin-card h-100">
          <div class="admin-body">
            <h5 class="admin-title">Permisos a Productos por Rol</h5>
            <p class="admin-desc">Asignación de permisos a Productos por Rol.</p>
          </div>
          <div class="admin-footer">
            <a class="btn btn-redondo"
             href="{{ url_for('roles_product_admin.index') }}">
              Abrir
            </a>
          </div>
        </div>
      </div>


      
    </div>
  </div>
  {% endif %}

</div>

<style>
.admin-section {
  padding: 20px;
  border-radius: 14px;
  background-color: #f8f9fa;
}

.admin-section-title {
  font-weight: 600;
  color: #555;
}

.admin-card {
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.admin-body {
  padding: 20px;
}

.admin-title {
  font-weight: 600;
}

.admin-desc {
  color: #666;
  font-size: 0.9rem;
}

.admin-footer {
  padding: 15px 20px;
  border-top: 1px solid #eee;
}

.btn-redondo {
  border-radius: 25px;
  padding: 6px 18px;
}
</style>

{% endblock %}
